# FSTR Pereval REST API

REST API для приёма и хранения информации о горных перевалах Федерации спортивного туризма России (ФСТР).

---

Проект демонстрирует:
- проектирование базы данных;
- работу с PostgreSQL;
- создание REST API на FastAPI;
- валидацию данных;
- использование Git в процессе разработки.

---

## Технологии

- Python 3.12
- FastAPI
- PostgreSQL
- psycopg2
- Pydantic
- Uvicorn

---

## Структура проекта

- main.py - Точки входа REST API
- db.py - Класс для работы с базой данных
- schemas.py - Pydantic-схемы
- requirements.txt - Зависимости

---

## Переменные окружения

Для подключения к базе данных используются переменные окружения:

- `FSTR_DB_HOST` - хост БД
- `FSTR_DB_PORT` - порт БД
- `FSTR_DB_LOGIN` - пользователь БД
- `FSTR_DB_PASS` - пароль БД
- `FSTR_DB_NAME` - имя базы данных

---

## Запуск проекта

1. Активировать виртуальное окружение
2. Установить зависимости `pip install -r requirements.txt`
3. Запустить сервер `uvicorn main:app --reload`
4. После запуска документация Swagger будет доступна по адресу: `http://127.0.0.1:8000/docs`

---

## Методы API

- `POST /submitData` - Добавление нового перевала. (возвращает id перевала)
- `GET /submitData/{id}` - Получение полной информации о перевале по его id.
- `GET /submitData/?user__email=<email>` - Получение списка всех перевалов, добавленных пользователем с указанным email.
- `PATCH /submitData/{id}` - Редактирование существующего перевала. (Разрешено только если статус = new)

---

## Структура базы данных

- `users` - пользователи
- `coords` - координаты перевала
- `pereval_added` - перевалы
- `perevel_images` - изображения перевала
